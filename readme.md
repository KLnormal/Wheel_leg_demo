# RM_Framework_H723

### Info

该项目处于开发阶段，存在大量未测试功能，不保证稳定性。

### Note

- 该项目依赖达妙 MC02 型开发板，如需使用其他开发板请自行移植。
- 请不要在 `Core` 目录下实现过多代码，否则会造成不必要的麻烦。
- 对于大多使用场景，你只需要完善 `app_gimbal` 和 `app_chassis`，即可实现基本的控制。

### 项目架构

- APP
  - 程序的主要逻辑
- BSP
  - 板载资源的支持包
- Components
  - 杂项
- External
  - 第三方库（静态链接库）

### 一些约定

为了保证该项目的稳定性，请在修改该框架前确保您的代码具有良好的代码风格和可读性、可维护性。

为了确保兼容性，`APP` 文件夹下的代码应当专注于业务逻辑，不应出现任何底层代码；`BSP` 文件夹下的代码应当是对当前平台外设的底层封装，这部分代码应当不依赖于其他代码而独立运行；`Components` 中则应当是各类可选组件以及各类设备的驱动代码，这部分代码不应包含任何业务逻辑。

其中，`APP` 中的业务逻辑均使用 `C++` 语言，`BSP` 中对底层的封装均使用 `C` 语言。

期望下，上述三个部分是相互独立的，这将带来更高的可维护性。

该项目已开启 `-Werror` 编译选项，任何警告都会被视为错误。

### 额外的

如果你认为这份代码中有任何问题，请提出 Issue 或提交 Pull Request。

在此之前你需要学会使用 GitHub。

### 快速开始

- **Fork** 本仓库，创建属于你自己的分支。
- 使用 `git clone` 将仓库克隆到本地。
- 使用 `CLion` 打开它。
- 打开 `STM32CubeMX` 生成代码。
- 在 `Core/Src/main.c` 中添加形如下面的初始化函数（请根据实际情况选择串口）。
```c++
  bsp_rc_init();
  bsp_adc_init();
  bsp_flash_init();
  bsp_buzzer_init();
  bsp_can_init(E_CAN1, &hfdcan1);
  bsp_can_init(E_CAN2, &hfdcan2);
  bsp_can_init(E_CAN3, &hfdcan3);
  bsp_uart_init(E_UART_DEBUG, &huart1);
```
- 检查无误后编译运行。

### 系统状态指示

上电后 `led` 亮红灯，进入 `FreeRTOS` 后变为蓝灯，且蜂鸣器响一声。

陀螺仪校准过程中绿灯常亮，此时需保持静止，若校准误差过大则自动载入预设误差值（不保证稳定）。

校准完成后蜂鸣器连续响两声，此后 `led` 变为白色呼吸灯表示系统正常工作。